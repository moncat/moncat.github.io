(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{464:function(s,a,e){"use strict";e.r(a);var r=e(2),n=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"通过spec文件-把一个可运行jar打包成rpm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过spec文件-把一个可运行jar打包成rpm"}},[s._v("#")]),s._v(" 通过spec文件，把一个可运行jar打包成rpm")]),s._v(" "),a("p",[s._v("要在 RPM 的 "),a("code",[s._v(".spec")]),s._v(" 文件中配置可运行的 JAR 文件，可以按照以下步骤进行配置：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("首先，打开你的 "),a("code",[s._v(".spec")]),s._v(" 文件，并确保在 "),a("code",[s._v("%build")]),s._v(" 段落中设置了正确的构建命令。如果使用 Maven 进行构建，可以使用以下命令：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mvn clean package\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在 "),a("code",[s._v("%install")]),s._v(" 段落中，将构建生成的 JAR 文件安装到指定位置。你可以使用以下命令将 JAR 文件复制到指定目录下（比如 "),a("code",[s._v("/usr/share/myapp")]),s._v("）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mkdir -p %{buildroot}/usr/share/myapp\ncp target/myapp.jar %{buildroot}/usr/share/myapp/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在 "),a("code",[s._v("%files")]),s._v(" 段落中，列出要打包到 RPM 中的文件和目录。确保包含 JAR 文件的路径，以及任何其他需要包含的资源文件。示例：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("%files\n%defattr(-,root,root,-)\n/usr/share/myapp/myapp.jar\n/usr/share/myapp/config.properties\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在 "),a("code",[s._v("%post")]),s._v(" 段落中，添加启动脚本或命令，用于运行 JAR 文件。例如，使用 "),a("code",[s._v("java -jar")]),s._v(" 命令来运行 JAR 文件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("%post\n# 启动应用程序\njava -jar /usr/share/myapp/myapp.jar > /dev/null 2>&1 &\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("确保在 "),a("code",[s._v("%preun")]),s._v(" 段落中，添加停止应用程序的命令。例如：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('%preun\n# 停止应用程序\npkill -f "java -jar /usr/share/myapp/myapp.jar"\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("最后，使用 "),a("code",[s._v("rpmbuild")]),s._v(" 命令构建 RPM 包：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpmbuild -ba myapp.spec\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("p",[s._v("通过上述步骤，你可以在 "),a("code",[s._v(".spec")]),s._v(" 文件中配置可运行的 JAR 文件。请确保根据你的实际项目需求进行适当的调整和修改。")])])}),[],!1,null,null,null);a.default=n.exports}}]);